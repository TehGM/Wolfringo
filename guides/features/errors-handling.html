<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Handling Errors | Wolfringo Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Handling Errors | Wolfringo Documentation ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../../wolfringo_logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../../styles/colors.css">
    <link rel="stylesheet" href="../../styles/discord.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>

  <body>
        <div class="top-navbar">

            <a href="javascript:void(0);" class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../../index.html">
              <img src="../../wolfringo_logo.png" alt="Wolfringo" class="logomark">
              <span class="brand-title">Wolfringo</span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    
                    
                    <div>
                      
                      <a class="brand" href="../../index.html">
                        <img src="../../wolfringo_logo.png" alt="Wolfringo" class="logomark">
                        <span class="brand-title">Wolfringo</span>
                      </a>
                      <div id="navbar">
                    
                      </div>
                    
                    </div>
                    

                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  Wolfringo (c) 2020 <a href='https://tehgm.net'>TehGM</a><br>DocFX, <a href='https://github.com/jbltx/DiscordFX/'>DiscordFX</a> theme.
                  
                </div>
            </nav>

            <main class="main-panel">

                <div>
                  
                  <div id="search-results">
                    <div class="search-list">Search Results for <span></span></div>
                    <div class="sr-items">
                      <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
                    </div>
                    <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
                  </div>
                </div>

                <div role="main" class="hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="Guides.Features.ErrorHandling">
<h1 id="handling-errors">Handling Errors</h1>

<p>Errors handling is very important to keep your bot running, and to diagnose any bugs and problems your bot might have. In Wolfringo, there are 2 types of errors: those that happen when you call some Wolfringo method, and those that occur on the background thread.</p>
<h3 id="errors-from-your-calls">Errors from your calls</h3>
<p>Wolfringo will throw an exception whenever there is an error that is caused by your action. You can use try-catch block to handle them.</p>
<p>There is one special exception type defined by Wolfringo library - <a class="xref" href="../../api/TehGM.Wolfringo.MessageSendingException.html">MessageSendingException</a>. This exception is thrown when WOLF server responds with a non-success status code to a message you sent. You can handle it like any other exception.</p>
<pre><code class="lang-csharp">try
{
    await _client.SendGroupTextMessageAsync(12345, &quot;Hello!&quot;);
}
catch (MessageSendingException ex)
{
    IWolfMessage sentMessage = ex.SentMessage;
    IWolfResponse serverResponse = ex.Response;
    string errorMessage = ex.Message;
}
</code></pre>
<h4 id="errors-in-commands">Errors in commands</h4>
<p>If you enabled logging, any exceptions that occured in your <a class="xref" href="../commands/creating-commands.html">commands</a> will be automatically <a class="xref" href="logging.html">logged</a> if you don't handle them yourself. Most exceptions are logged as error, with a few exceptions:</p>
<h6 id="-always">&lt;xref:System.OperationCanceledException&gt; (always)</h6>
<p>Operation cancellations are used to control the flow of asynchronous applications. They're a normal and relatively common occurence, so they're logged as warning instead.</p>
<h6 id="-conditionally"><a class="xref" href="../../api/TehGM.Wolfringo.MessageSendingException.html">MessageSendingException</a> (conditionally)</h6>
<p>Nearly all commands of your bot will send a response, but your bot might be silenced in the group. You can check that by requesting the group's profile and checking its members list to see what <a class="xref" href="../../api/TehGM.Wolfringo.WolfGroupCapabilities.html">WolfGroupCapabilities</a> your bot has. But in many cases, this might be unnecessary and just make your commands code much longer and less maintainable. For this reason, Commands System will log this exception as warning instead of error if all of the following conditions are met:</p>
<ul>
<li>Server responded with @System.Net.HttpStatusCode.Forbidden (403).</li>
<li>The response has <a class="xref" href="../../api/TehGM.Wolfringo.Messages.Responses.WolfResponse.html#TehGM_Wolfringo_Messages_Responses_WolfResponse_ErrorCode">ErrorCode</a> with value <a class="xref" href="../../api/TehGM.Wolfringo.Messages.Responses.WolfErrorCode.html#TehGM_Wolfringo_Messages_Responses_WolfErrorCode_LoginIncorrectOrCannotSendMessage">LoginIncorrectOrCannotSendMessage</a> (1).</li>
<li>The message sent by the bot implements <a class="xref" href="../../api/TehGM.Wolfringo.Messages.IChatMessage.html">IChatMessage</a>.</li>
<li>The message sent by the bot was sent to the same user (in case of PMs) or the same group (in case of groups) as where the command came from.</li>
</ul>
<h3 id="errors-on-background-thread">Errors on background thread</h3>
<p>Errors can sometimes occur from background thread. The best way to be aware of them is to enable <a class="xref" href="logging.html">logging</a> - <a class="xref" href="../../api/TehGM.Wolfringo.WolfClient.html">WolfClient</a> will log all errors it caught into the logger.</p>
<p>Additionally, you can subscribe to <a class="xref" href="../../api/TehGM.Wolfringo.IWolfClient.html#TehGM_Wolfringo_IWolfClient_ErrorRaised">IWolfClient.ErrorRaised</a> event. Its @System.UnhandledExceptionEventArgs contains @System.UnhandledExceptionEventArgs.ExceptionObject property, which is the exception that occured.</p>
</article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../../styles/url.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script type="text/javascript" src="../../styles/docfx.js"></script>
<script type="text/javascript" src="../../styles/main.js"></script>
<script type="text/javascript">
	anchors.options.visible = 'touch';
	anchors.options.placement = 'left';
	anchors.add('h2, h3, h4, h5');
</script>
    </body>

</html>
