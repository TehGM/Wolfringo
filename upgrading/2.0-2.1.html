<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Upgrading Wolfringo v2.0 to v2.1 | Wolfringo Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Upgrading Wolfringo v2.0 to v2.1 | Wolfringo Documentation ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../wolfringo_logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../styles/colors.css">
    <link rel="stylesheet" href="../styles/discord.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>

  <body>
        <div class="top-navbar">

            <a href="javascript:void(0);" class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../index.html">
              <img src="../wolfringo_logo.png" alt="Wolfringo" class="logomark">
              <span class="brand-title">Wolfringo</span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    
                    
                    <div>
                      
                      <a class="brand" href="../index.html">
                        <img src="../wolfringo_logo.png" alt="Wolfringo" class="logomark">
                        <span class="brand-title">Wolfringo</span>
                      </a>
                      <div id="navbar">
                    
                      </div>
                    
                    </div>
                    

                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  Wolfringo (c) 2020 <a href='https://tehgm.net'>TehGM</a><br>DocFX, <a href='https://github.com/jbltx/DiscordFX/'>DiscordFX</a> theme.
                  
                </div>
            </nav>

            <main class="main-panel">

                <div>
                  
                  <div id="search-results">
                    <div class="search-list">Search Results for <span></span></div>
                    <div class="sr-items">
                      <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
                    </div>
                    <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
                  </div>
                </div>

                <div role="main" class="hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="Upgrading.2_0-to-2_1">
<h1 id="wolfringo-v21">Wolfringo v2.1</h1>

<p>Wolfringo 2.1 took a while, and still was focused more on getting the library more up-to-date than many fancy new features. There's still work to be done, but over years some issues accumulated and really needed fixing - and that's where the focus was.<br>
For most users there should be little to no changes needed in the bot's code - however there were some important changes that might be slightly breaking.</p>
<h2 id="prefixrequirement-attribute">[PrefixRequirement] Attribute</h2>
<p>Due to issues caused by how .NET and C# work internally, there was a need to separate <a class="xref" href="../api/TehGM.Wolfringo.Commands.PrefixAttribute.html">[Prefix]</a> and <a class="xref" href="../api/TehGM.Wolfringo.Commands.PrefixRequirementAttribute.html">[PrefixRequirement]</a>. <a class="xref" href="../api/TehGM.Wolfringo.Commands.PrefixAttribute.html">[Prefix]</a> now only works for changing the prefix string - if that's all you used it for, you don't need any changes. However if you used it to change <a class="xref" href="../api/TehGM.Wolfringo.Commands.PrefixRequirement.html">PrefixRequirement</a> of a command, you need to change the command to be decorated with <a class="xref" href="../api/TehGM.Wolfringo.Commands.PrefixRequirementAttribute.html">[PrefixRequirement]</a>.</p>
<p>These attributes work together, so you can still override both behaviours:</p>
<pre><code class="lang-csharp">[Command(&quot;test&quot;)]
[Prefix(&quot;&gt;&quot;)]
[PrefixRequirement(PrefixRequirement.Always)]
public async Task CmdTimeoutAsync(CancellationToken cancellationToken)
{
    // ... code here ...
}
</code></pre>
<h2 id="changes-to-group-member-list-download">Changes to Group Member List download</h2>
<p>WOLF protocol has changed over past few years. One of the changes was addition of different commands for requesting group members.</p>
<h3 id="groupmemberslistmessage-obsoleted">GroupMembersListMessage Obsoleted</h3>
<p><a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMembersListMessage.html">GroupMembersListMessage</a> has been marked as obsolete. Due to the changes in the protocol, this command while returns members list, is limited to 100 members. If a group has more members, it's impossible to get all group members. Use <a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMemberRegularListMessage.html">GroupMemberRegularListMessage</a> and <a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMemberPrivilegedListMessage.html">GroupMemberPrivilegedListMessage</a> instead.</p>
<p><a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMembersListMessage.html">GroupMembersListMessage</a> is still in the codebase yet, as the server still responds with some data. However it's considered broken, and will most likely be removed in a future update.</p>
<h3 id="new-message-types">New message types</h3>
<p><a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMemberRegularListMessage.html">GroupMemberRegularListMessage</a> and <a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMemberPrivilegedListMessage.html">GroupMemberPrivilegedListMessage</a> were added. <a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMemberRegularListMessage.html">GroupMemberRegularListMessage</a> supports pagination to allow requesting members from large groups.</p>
<p>Extension methods (both for Sender Utility as well CommandContext) have been updated to use these new messages. Keep in mind that it can result in more messages being sent when retrieving a group and its members list.</p>
<p>Due to inconsistency in WOLF protocol design, it's still not clear how profile updates subscriptions are affected.</p>
<h3 id="group-member-caching">Group Member Caching</h3>
<p>Due to the messages being paginated after WOLF protocol changes, default Cache service is no longer able to intercept member list responses in order to cache them. If you use Sender utility or CommandContext extension methods, these helpers will still cache group members in the group object - however if you were using <a class="xref" href="../api/TehGM.Wolfringo.Messages.GroupMembersListMessage.html">GroupMembersListMessage</a> directly, the response no longer can be cached. Please update group member list manually or use the Sender helper methods.</p>
<h2 id="avatarutilities-obsoleted">AvatarUtilities Obsoleted</h2>
<p><a class="xref" href="../api/TehGM.Wolfringo.Utilities.AvatarUtilities.html">AvatarUtilities</a> is an utility class for building Group and User avatar links, and downloading these avatars. However the old and easy to predict link format seems to have been phased out. Fixing this will likely require redesigning the utility class and changing method signatures.</p>
<p>For this reason <a class="xref" href="../api/TehGM.Wolfringo.Utilities.AvatarUtilities.html">AvatarUtilities</a> class has been marked as obsolete. You should remove its usage to prepare for a redesign in an upcoming library release.</p>
</article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../styles/url.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script type="text/javascript" src="../styles/docfx.js"></script>
<script type="text/javascript" src="../styles/main.js"></script>
<script type="text/javascript">
	anchors.options.visible = 'touch';
	anchors.options.placement = 'left';
	anchors.add('h2, h3, h4, h5');
</script>
    </body>

</html>
